<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module otter_filter</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module otter_filter</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>   
The main idea behind this filter that the processing of the spans can   
be modified runtime by changing the filter configuration.


<h2><a name="description">Description</a></h2><p>   
The main idea behind this filter that the processing of the spans can   
be modified runtime by changing the filter configuration. This way   
logging, counting or sending data to trace collectors can be modified   
on the running system based on the changing operational requirements.</p>
  
   <p>The span filter works with key value pair lists. This was the   
easiest to implement and reasonably fast.</p>
  
   <p>Filter rules are composed by a list of <code>{Conditions, Actions}</code> tuples.
   Processing a span means iterating through this list and when an item
   found where all <code>Conditions</code> evaluate to true then the <code>Actions</code> in that   
item are executed.</p>
  
   <p><code>Conditions</code> operate on a copy of the tags of the span. It is a
   sequence of checks against the tags (e.g. key present, key value)
   where if any check in the sequence fails, the associated actions are
   not executed and the next <code>{Conditions, Actions}</code> item is evaluated.
   <code>Actions</code> can trigger e.g. counting a particular tag value combination,
   logging, sending the span to trace collectors, modifying the working
   (i.e. used for further conditions) tag list, modifying the span tag
   list that is to be sent to trace collector. <code>Actions</code> can also
   influence the further evaluation of the rules i.e. providing the
   break action instructs the rule engine NOT to look further in the
   list of <code>{Conditions, Actions}</code>.</p>
  
   <code>Evaluation</code> of the rules happens in the process which invokes the span
   end statement (e.g. @link otter:finish/1.) i.e. it has impact on the
   request processing time. Therefore the actions that consume little
   time and resources with no external interfaces (e.g. counting in ets)
   can be done during the evaluation of the rules, but anything that has
   external interface or dependent on environment (e.g. logging and trace
   collecting) should be done asynchronously.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#span-1">span/1</a></td><td>Takes a span as input, evaluates rules specified in
  configuration and executes any specified actions.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="span-1">span/1</a></h3>
<div class="spec">
<p><tt>span(Span::<a href="#type-span">span()</a>) -&gt; ok</tt><br></p>
</div><p>Takes a span as input, evaluates rules specified in
  configuration and executes any specified actions.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Apr 14 2017, 04:05:41.</i></p>
</body>
</html>
